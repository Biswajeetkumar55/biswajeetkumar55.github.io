"use strict";(self.webpackChunkfinance_management_app=self.webpackChunkfinance_management_app||[]).push([[592],{9056:(O,d,o)=>{o.d(d,{a:()=>F});var l=o(520),e=o(5e3),g=o(5425),h=o(8157),m=o(8671),_=o(72),p=o(9808),u=o(8512);function v(r,i){if(1&r&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.message,"\n")}}function f(r,i){if(1&r&&(e.TgZ(0,"div",10),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.serverErrorMessage,"\n")}}function E(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"input",11),e.NdJ("change",function(a){return e.CHM(t),e.oxw().selectFile(a)}),e.qZA(),e.TgZ(5,"button",12),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().uploadDocument(c.id)}),e._uU(6,"Save File"),e.qZA()()()}if(2&r){const t=i.$implicit,s=e.oxw();e.xp6(2),e.Oqu(t.caseRef),e.xp6(3),e.Q6J("disabled",!s.selectedFile)}}let F=(()=>{class r{constructor(t,s,a,c){this.router=t,this.dashboardService=s,this.commonService=a,this.SpinnerService=c,this.parentUrl="",this.pendingFOA=[],this.serverError=!1,this.serverErrorMessage="",this.progress={percentage:0},this.docKeyList=[],this.selectedFile=null,this.message="",this.actionValue="",this.caseId=0}ngOnInit(){this.SpinnerService.show(),this.parentUrl=sessionStorage.getItem("parentUrl")||"",this.dashboardService.getPendingFOA().subscribe({next:t=>{this.SpinnerService.hide(),this.pendingFOA=t.body.responseBody.data,console.log("pending FOA---------"),console.log(this.pendingFOA),0===this.pendingFOA.length&&(this.serverError=!0,this.serverErrorMessage="No pending FOA exist!!!")},error:t=>{this.SpinnerService.hide(),this.serverError=!0,this.serverErrorMessage="Some Error Occured!Please try again!!!"}})}selectFile(t){this.selectedFile=t.target.files}uploadDocument(t){this.message="",this.serverError=!1,this.serverErrorMessage="",this.progress.percentage=0;let s=this.selectedFile.item(0);this.SpinnerService.show(),this.dashboardService.uploadDocument("FOA","FOA",s,t).subscribe({next:n=>{n.type===l.dt.UploadProgress?this.progress.percentage=Math.round(100*n.loaded/(n.total||0)):n instanceof l.Zn&&(this.message="Document Uploaded successfully!!!"),this.selectedFile=null,this.SpinnerService.hide()},error:n=>{this.SpinnerService.hide(),this.serverError=!0,this.serverErrorMessage=n.error.responseBody.errors[0].desc}})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.F0),e.Y36(h.f),e.Y36(m.t),e.Y36(_.t2))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-upload-foa"]],decls:16,vars:3,consts:[[1,"container"],["bdColor","rgba(51, 51, 51, 0.8)","size","medium","type","ball-circus"],[2,"color","white"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"table-responsive","responsive_table","mt-3","d-flex","justify-content-center","align-items-center"],[1,"table","table-striped","table-bordered","table-hover","text-center","w-50"],[1,"table-dark"],[4,"ngFor","ngForOf"],[1,"text-success"],[1,"text-danger"],["type","file","id","myfile","ngbTooltip","For Upload","name","myfile",1,"form-control",3,"change"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"ngx-spinner",1)(2,"p",2),e._uU(3,"Loading "),e.qZA()(),e.YNc(4,v,2,1,"div",3),e.YNc(5,f,2,1,"div",4),e.TgZ(6,"div",5)(7,"table",6)(8,"thead",7)(9,"tr")(10,"th"),e._uU(11,"Case Reference"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Action"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,E,7,2,"tr",8),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",s.message),e.xp6(1),e.Q6J("ngIf",s.serverError),e.xp6(10),e.Q6J("ngForOf",s.pendingFOA))},directives:[_.Ro,p.O5,p.sg,u._L],styles:[""]}),r})()}}]);